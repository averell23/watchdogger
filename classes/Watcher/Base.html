<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Watcher::Base</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Watcher::Base</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/watcher/base_rb.html">
                lib/watcher/base.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
<a href="Base.html">Base</a> class for all <a
href="../Watcher.html">Watcher</a>.
</p>
<p>
A watcher checks for a condition (e.g., if a web site responds, if a log
file shows signs of trouble). Each watcher will have one or more actions
attached that will be called if the watched condition is triggered.
</p>
<h1>Options</h1>
<p>
Each watcher will accept the following options, which are handled by the
superclass:
</p>
<dl>
<dt><b>severity</b></dt><dd>Severity of the event. Each time the event is triggered, the watcher will
add this value to the internal &quot;severity&quot;. If the internal
severity reaches 100, the action is triggered. This means that with a
severity of 100 the action is run each time the watcher triggers. With a
severity of 1, it is only executed every 100th time. The global mechanism
will reset the severity once the action is triggered. The watcher class may
decide to reset the severity also on other occasions. Default: 100

</dd>
<dt><b>actions</b></dt><dd>The actions that should be executed when the watcher triggers. These are
names of actions that have been set up previously. (Required)

</dd>
<dt><b>warn_actions</b></dt><dd>Additional actions that are executed if the watcher triggers, but the
severity for a real action is not yet reached.

</dd>
</dl>
<p>
Each watcher object must respond to the watch_it! method. It must check the
watched condition and return nil or false if the condition is not met. If
the condition is met, it may return true or an error message.
</p>
<p>
The <a href="../Watcher.html">Watcher</a> <em>may</em> also respond to the
cleanup method - which will be used to clean up all existing <a
href="../Watcher.html">Watcher</a> on a clean shutdown.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000008">setup_actions</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">name</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">severity</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000008" class="method-detail">
        <a name="M000008"></a>

        <div class="method-heading">
          <a href="#M000008" class="method-signature">
          <span class="method-name">setup_actions</span><span class="method-args">(configuration)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets up all actions for this watcher
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000008-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000008-source">
<pre>
    <span class="ruby-comment cmt"># File lib/watcher/base.rb, line 38</span>
38:      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_actions</span>(<span class="ruby-identifier">configuration</span>)
39:        <span class="ruby-identifier">action_config</span> = <span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">get_list</span>(<span class="ruby-identifier">:actions</span>, <span class="ruby-keyword kw">false</span>)
40:        <span class="ruby-identifier">action_config</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ac</span><span class="ruby-operator">|</span> <span class="ruby-identifier">add_action_to</span>(<span class="ruby-identifier">actions</span>, <span class="ruby-identifier">ac</span>) }
41:        <span class="ruby-identifier">warn_config</span> = <span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">get_list</span>(<span class="ruby-identifier">:warn_actions</span>, [])
42:        <span class="ruby-identifier">warn_config</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ac</span><span class="ruby-operator">|</span> <span class="ruby-identifier">add_action_to</span>(<span class="ruby-identifier">warn_actions</span>, <span class="ruby-identifier">ac</span>) }
43:      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>