<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: WatcherAction</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">WatcherAction</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/watcher_action/htpost_rb.html">
                lib/watcher_action/htpost.rb
                </a>
        <br />
                <a href="../files/lib/watcher_action/kill_process_rb.html">
                lib/watcher_action/kill_process.rb
                </a>
        <br />
                <a href="../files/lib/watcher_action/log_action_rb.html">
                lib/watcher_action/log_action.rb
                </a>
        <br />
                <a href="../files/lib/watcher_action/meta_action_rb.html">
                lib/watcher_action/meta_action.rb
                </a>
        <br />
                <a href="../files/lib/watcher_action/send_mail_rb.html">
                lib/watcher_action/send_mail.rb
                </a>
        <br />
                <a href="../files/lib/watcher_action_rb.html">
                lib/watcher_action.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Each action object contains the action that will be taken when a watched
condition is triggered.
</p>
<p>
Each action must respond to the execute(event) method, which will execute
the action.
</p>
<p>
Actions should <b>not</b> log the executing to the log file, unless there
is an unexpected error in the execution of the action itself. If the user
wants to log to the log file, the logger action should be used. (All
actions may use the log for debug-level information in all places.)
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000013">has_action?</a>&nbsp;&nbsp;
      <a href="#M000014">is_action?</a>&nbsp;&nbsp;
      <a href="#M000011">register</a>&nbsp;&nbsp;
      <a href="#M000012">run_action</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Class <a href="WatcherAction/Htpost.html" class="link">WatcherAction::Htpost</a><br />
Class <a href="WatcherAction/KillProcess.html" class="link">WatcherAction::KillProcess</a><br />
Class <a href="WatcherAction/LogAction.html" class="link">WatcherAction::LogAction</a><br />
Class <a href="WatcherAction/MetaAction.html" class="link">WatcherAction::MetaAction</a><br />
Class <a href="WatcherAction/SendMail.html" class="link">WatcherAction::SendMail</a><br />

    </div>




      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000013" class="method-detail">
        <a name="M000013"></a>

        <div class="method-heading">
          <a href="#M000013" class="method-signature">
          <span class="method-name">has_action?</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Checks if the given action exists
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000013-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000013-source">
<pre>
    <span class="ruby-comment cmt"># File lib/watcher_action.rb, line 34</span>
34:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_action?</span>(<span class="ruby-identifier">name</span>)
35:       <span class="ruby-identifier">registered_actions</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
36:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000014" class="method-detail">
        <a name="M000014"></a>

        <div class="method-heading">
          <a href="#M000014" class="method-signature">
          <span class="method-name">is_action?</span><span class="method-args">(name, action)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Checks if the given action is registered with that name
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000014-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000014-source">
<pre>
    <span class="ruby-comment cmt"># File lib/watcher_action.rb, line 39</span>
39:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">is_action?</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">action</span>)
40:       <span class="ruby-identifier">registered_actions</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">action</span>
41:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000011" class="method-detail">
        <a name="M000011"></a>

        <div class="method-heading">
          <a href="#M000011" class="method-signature">
          <span class="method-name">register</span><span class="method-args">(name, config_options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
creates a new action of the given type. The Action object itself will not
be made public, instead call the <a
href="WatcherAction.html#M000012">run_action</a> method to execute it
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000011-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000011-source">
<pre>
    <span class="ruby-comment cmt"># File lib/watcher_action.rb, line 15</span>
15:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">register</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">config_options</span>)
16:       <span class="ruby-identifier">assit_kind_of</span>(<span class="ruby-constant">String</span>, <span class="ruby-identifier">name</span>)
17:       <span class="ruby-identifier">raise</span>(<span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;Illegal options.&quot;</span>) <span class="ruby-keyword kw">unless</span>(<span class="ruby-identifier">config_options</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>))
18:       <span class="ruby-identifier">type</span> = <span class="ruby-identifier">config_options</span>.<span class="ruby-identifier">get_value</span>(<span class="ruby-identifier">:type</span>, <span class="ruby-keyword kw">false</span>)
19:       <span class="ruby-identifier">type</span> = <span class="ruby-constant">WatchDogger</span>.<span class="ruby-identifier">camelize</span>(<span class="ruby-identifier">type</span>)
20:       <span class="ruby-identifier">registered_actions</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>] = <span class="ruby-constant">WatcherAction</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">type</span>).<span class="ruby-identifier">new</span>(<span class="ruby-identifier">config_options</span>)
21:       <span class="ruby-identifier">dog_log</span>.<span class="ruby-identifier">debug</span>(<span class="ruby-value str">'Action Handler'</span>) { <span class="ruby-node">&quot;Registered action '#{name}' of type #{type}&quot;</span>}
22:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000012" class="method-detail">
        <a name="M000012"></a>

        <div class="method-heading">
          <a href="#M000012" class="method-signature">
          <span class="method-name">run_action</span><span class="method-args">(name, event)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Runs the named action. Returns true if the action ran without exception.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000012-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000012-source">
<pre>
    <span class="ruby-comment cmt"># File lib/watcher_action.rb, line 25</span>
25:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">run_action</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">event</span>)
26:       <span class="ruby-identifier">registered_actions</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>].<span class="ruby-identifier">execute</span>(<span class="ruby-identifier">event</span>)
27:       <span class="ruby-keyword kw">true</span>
28:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
29:       <span class="ruby-identifier">dog_log</span>.<span class="ruby-identifier">error</span>(<span class="ruby-value str">'Action Handler'</span>) { <span class="ruby-node">&quot;Could not execute #{name}: #{e.message} (Registered actions: #{registered_actions.keys.join(', ')})&quot;</span> }
30:       <span class="ruby-keyword kw">false</span>
31:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>